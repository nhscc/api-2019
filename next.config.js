"use strict";

var _bundleAnalyzer = _interopRequireDefault(require("@next/bundle-analyzer"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('./src/dev-utils').populateEnv();

const paths = {
  universe: `${__dirname}/src/`,
  multiverse: `${__dirname}/lib/`
};

module.exports = () => {
  return (0, _bundleAnalyzer.default)({
    enabled: process.env.ANALYZE === 'true'
  })({
    distDir: 'build',
    webpack: config => {
      config.resolve && (config.resolve.alias = { ...config.resolve.alias,
        universe: paths.universe,
        multiverse: paths.multiverse
      });
      return config;
    },
    env: {
      MAX_LIMIT: process.env.MAX_LIMIT,
      IGNORE_RATE_LIMITS: process.env.IGNORE_RATE_LIMITS,
      LOCKOUT_ALL_KEYS: process.env.LOCKOUT_ALL_KEYS,
      DISALLOWED_METHODS: process.env.DISALLOWED_METHODS,
      REQUESTS_PER_CONTRIVED_ERROR: process.env.REQUESTS_PER_CONTRIVED_ERROR,
      MAX_OPTIONS_PER_ELECTION: process.env.MAX_OPTIONS_PER_ELECTION,
      MAX_RANKINGS_PER_ELECTION: process.env.MAX_RANKINGS_PER_ELECTION,
      MAX_CONTENT_LENGTH_BYTES: process.env.MAX_CONTENT_LENGTH_BYTES
    }
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9uZXh0LmNvbmZpZy50cyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwicG9wdWxhdGVFbnYiLCJwYXRocyIsInVuaXZlcnNlIiwiX19kaXJuYW1lIiwibXVsdGl2ZXJzZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIkFOQUxZWkUiLCJkaXN0RGlyIiwid2VicGFjayIsImNvbmZpZyIsInJlc29sdmUiLCJhbGlhcyIsIk1BWF9MSU1JVCIsIklHTk9SRV9SQVRFX0xJTUlUUyIsIkxPQ0tPVVRfQUxMX0tFWVMiLCJESVNBTExPV0VEX01FVEhPRFMiLCJSRVFVRVNUU19QRVJfQ09OVFJJVkVEX0VSUk9SIiwiTUFYX09QVElPTlNfUEVSX0VMRUNUSU9OIiwiTUFYX1JBTktJTkdTX1BFUl9FTEVDVElPTiIsIk1BWF9DT05URU5UX0xFTkdUSF9CWVRFUyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQU9BQSxPQUFPLENBQUMsaUJBQUQsQ0FBUCxDQUEyQkMsV0FBM0I7O0FBRUEsTUFBTUMsS0FBSyxHQUFHO0FBQ1ZDLEVBQUFBLFFBQVEsRUFBRyxHQUFFQyxTQUFVLE9BRGI7QUFFVkMsRUFBQUEsVUFBVSxFQUFHLEdBQUVELFNBQVU7QUFGZixDQUFkOztBQUtBRSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsTUFBYztBQUMzQixTQUFPLDZCQUFtQjtBQUN0QkMsSUFBQUEsT0FBTyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsT0FBWixLQUF3QjtBQURYLEdBQW5CLEVBRUo7QUFFQ0MsSUFBQUEsT0FBTyxFQUFFLE9BRlY7QUFPQ0MsSUFBQUEsT0FBTyxFQUFHQyxNQUFELElBQTJCO0FBSWhDQSxNQUFBQSxNQUFNLENBQUNDLE9BQVAsS0FBbUJELE1BQU0sQ0FBQ0MsT0FBUCxDQUFlQyxLQUFmLEdBQXVCLEVBQ3RDLEdBQUdGLE1BQU0sQ0FBQ0MsT0FBUCxDQUFlQyxLQURvQjtBQUV0Q2IsUUFBQUEsUUFBUSxFQUFFRCxLQUFLLENBQUNDLFFBRnNCO0FBR3RDRSxRQUFBQSxVQUFVLEVBQUVILEtBQUssQ0FBQ0c7QUFIb0IsT0FBMUM7QUFNQSxhQUFPUyxNQUFQO0FBQ0gsS0FsQkY7QUF1QkNKLElBQUFBLEdBQUcsRUFBRTtBQUNETyxNQUFBQSxTQUFTLEVBQUVSLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTyxTQUR0QjtBQUVEQyxNQUFBQSxrQkFBa0IsRUFBRVQsT0FBTyxDQUFDQyxHQUFSLENBQVlRLGtCQUYvQjtBQUdEQyxNQUFBQSxnQkFBZ0IsRUFBRVYsT0FBTyxDQUFDQyxHQUFSLENBQVlTLGdCQUg3QjtBQUlEQyxNQUFBQSxrQkFBa0IsRUFBRVgsT0FBTyxDQUFDQyxHQUFSLENBQVlVLGtCQUovQjtBQUtEQyxNQUFBQSw0QkFBNEIsRUFBRVosT0FBTyxDQUFDQyxHQUFSLENBQVlXLDRCQUx6QztBQU1EQyxNQUFBQSx3QkFBd0IsRUFBRWIsT0FBTyxDQUFDQyxHQUFSLENBQVlZLHdCQU5yQztBQU9EQyxNQUFBQSx5QkFBeUIsRUFBRWQsT0FBTyxDQUFDQyxHQUFSLENBQVlhLHlCQVB0QztBQVFEQyxNQUFBQSx3QkFBd0IsRUFBRWYsT0FBTyxDQUFDQyxHQUFSLENBQVljO0FBUnJDO0FBdkJOLEdBRkksQ0FBUDtBQW9DSCxDQXJDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB3aXRoQnVuZGxlQW5hbHl6ZXIgZnJvbSAnQG5leHQvYnVuZGxlLWFuYWx5emVyJ1xuXG5pbXBvcnQgdHlwZSB7IENvbmZpZ3VyYXRpb24gfSBmcm9tICd3ZWJwYWNrJ1xuXG4vLyA/IE5vdCB1c2luZyBFUzYvVFMgaW1wb3J0IHN5bnRheCBoZXJlIGJlY2F1c2UgZGV2LXV0aWxzIGhhcyBzcGVjaWFsXG4vLyA/IGNpcmN1bXN0YW5jZXNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW5yZXNvbHZlZCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xucmVxdWlyZSgnLi9zcmMvZGV2LXV0aWxzJykucG9wdWxhdGVFbnYoKTtcblxuY29uc3QgcGF0aHMgPSB7XG4gICAgdW5pdmVyc2U6IGAke19fZGlybmFtZX0vc3JjL2AsXG4gICAgbXVsdGl2ZXJzZTogYCR7X19kaXJuYW1lfS9saWIvYCxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gKCk6IG9iamVjdCA9PiB7XG4gICAgcmV0dXJuIHdpdGhCdW5kbGVBbmFseXplcih7XG4gICAgICAgIGVuYWJsZWQ6IHByb2Nlc3MuZW52LkFOQUxZWkUgPT09ICd0cnVlJ1xuICAgIH0pKHtcbiAgICAgICAgLy8gPyBSZW5hbWVzIHRoZSBidWlsZCBkaXIgXCJidWlsZFwiIGluc3RlYWQgb2YgXCIubmV4dFwiXG4gICAgICAgIGRpc3REaXI6ICdidWlsZCcsXG5cbiAgICAgICAgLy8gPyBXZWJwYWNrIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgLy8gISBOb3RlIHRoYXQgdGhlIHdlYnBhY2sgY29uZmlndXJhdGlvbiBpcyBleGVjdXRlZCB0d2ljZTogb25jZVxuICAgICAgICAvLyAhIHNlcnZlci1zaWRlIGFuZCBvbmNlIGNsaWVudC1zaWRlIVxuICAgICAgICB3ZWJwYWNrOiAoY29uZmlnOiBDb25maWd1cmF0aW9uKSA9PiB7XG4gICAgICAgICAgICAvLyA/IFRoZXNlIGFyZSBhbGlhc2VzIHRoYXQgY2FuIGJlIHVzZWQgZHVyaW5nIEpTIGltcG9ydCBjYWxsc1xuICAgICAgICAgICAgLy8gISBOb3RlIHRoYXQgeW91IG11c3QgYWxzbyBjaGFuZ2UgdGhlc2Ugc2FtZSBhbGlhc2VzIGluIHRzY29uZmlnLmpzb25cbiAgICAgICAgICAgIC8vICEgTm90ZSB0aGF0IHlvdSBtdXN0IGFsc28gY2hhbmdlIHRoZXNlIHNhbWUgYWxpYXNlcyBpbiBwYWNrYWdlLmpzb24gKGplc3QpXG4gICAgICAgICAgICBjb25maWcucmVzb2x2ZSAmJiAoY29uZmlnLnJlc29sdmUuYWxpYXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uY29uZmlnLnJlc29sdmUuYWxpYXMsXG4gICAgICAgICAgICAgICAgdW5pdmVyc2U6IHBhdGhzLnVuaXZlcnNlLFxuICAgICAgICAgICAgICAgIG11bHRpdmVyc2U6IHBhdGhzLm11bHRpdmVyc2UsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA/IFNlbGVjdCBzb21lIGVudmlyb25tZW50IHZhcmlhYmxlcyBkZWZpbmVkIGluIC5lbnYgdG8gcHVzaCB0byB0aGVcbiAgICAgICAgLy8gPyBjbGllbnQuXG4gICAgICAgIC8vICEhIERPIE5PVCBQVVQgQU5ZIFNFQ1JFVCBFTlZJUk9OTUVOVCBWQVJJQUJMRVMgSEVSRSAhIVxuICAgICAgICBlbnY6IHtcbiAgICAgICAgICAgIE1BWF9MSU1JVDogcHJvY2Vzcy5lbnYuTUFYX0xJTUlULFxuICAgICAgICAgICAgSUdOT1JFX1JBVEVfTElNSVRTOiBwcm9jZXNzLmVudi5JR05PUkVfUkFURV9MSU1JVFMsXG4gICAgICAgICAgICBMT0NLT1VUX0FMTF9LRVlTOiBwcm9jZXNzLmVudi5MT0NLT1VUX0FMTF9LRVlTLFxuICAgICAgICAgICAgRElTQUxMT1dFRF9NRVRIT0RTOiBwcm9jZXNzLmVudi5ESVNBTExPV0VEX01FVEhPRFMsXG4gICAgICAgICAgICBSRVFVRVNUU19QRVJfQ09OVFJJVkVEX0VSUk9SOiBwcm9jZXNzLmVudi5SRVFVRVNUU19QRVJfQ09OVFJJVkVEX0VSUk9SLFxuICAgICAgICAgICAgTUFYX09QVElPTlNfUEVSX0VMRUNUSU9OOiBwcm9jZXNzLmVudi5NQVhfT1BUSU9OU19QRVJfRUxFQ1RJT04sXG4gICAgICAgICAgICBNQVhfUkFOS0lOR1NfUEVSX0VMRUNUSU9OOiBwcm9jZXNzLmVudi5NQVhfUkFOS0lOR1NfUEVSX0VMRUNUSU9OLFxuICAgICAgICAgICAgTUFYX0NPTlRFTlRfTEVOR1RIX0JZVEVTOiBwcm9jZXNzLmVudi5NQVhfQ09OVEVOVF9MRU5HVEhfQllURVMsXG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iXX0=