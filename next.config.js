"use strict";

var _bundleAnalyzer = _interopRequireDefault(require("@next/bundle-analyzer"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

require('./src/dev-utils').populateEnv();

const paths = {
  universe: `${__dirname}/src/`,
  multiverse: `${__dirname}/lib/`
};

module.exports = () => {
  return (0, _bundleAnalyzer.default)({
    enabled: process.env.ANALYZE === 'true'
  })({
    distDir: 'build',
    webpack: (config, {
      isServer
    }) => {
      config.resolve && (config.resolve.alias = { ...config.resolve.alias,
        universe: paths.universe,
        multiverse: paths.multiverse
      });
      return config;
    },
    env: {
      MAX_LIMIT: process.env.MAX_LIMIT,
      LIMIT_OVERRIDE: process.env.LIMIT_OVERRIDE,
      DISABLE_RATE_LIMITS: process.env.DISABLE_RATE_LIMITS,
      LOCKOUT_ALL_KEYS: process.env.LOCKOUT_ALL_KEYS,
      DISALLOW_WRITES: process.env.DISALLOW_WRITES,
      REQUESTS_PER_CONTRIVED_ERROR: process.env.REQUESTS_PER_CONTRIVED_ERROR,
      MAX_OPTIONS_PER_ELECTION: process.env.MAX_OPTIONS_PER_ELECTION,
      MAX_RANKINGS_PER_ELECTION: process.env.MAX_RANKINGS_PER_ELECTION,
      MAX_CONTENT_LENGTH_BYTES: process.env.MAX_CONTENT_LENGTH_BYTES
    }
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9uZXh0LmNvbmZpZy50cyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwicG9wdWxhdGVFbnYiLCJwYXRocyIsInVuaXZlcnNlIiwiX19kaXJuYW1lIiwibXVsdGl2ZXJzZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIkFOQUxZWkUiLCJkaXN0RGlyIiwid2VicGFjayIsImNvbmZpZyIsImlzU2VydmVyIiwicmVzb2x2ZSIsImFsaWFzIiwiTUFYX0xJTUlUIiwiTElNSVRfT1ZFUlJJREUiLCJESVNBQkxFX1JBVEVfTElNSVRTIiwiTE9DS09VVF9BTExfS0VZUyIsIkRJU0FMTE9XX1dSSVRFUyIsIlJFUVVFU1RTX1BFUl9DT05UUklWRURfRVJST1IiLCJNQVhfT1BUSU9OU19QRVJfRUxFQ1RJT04iLCJNQVhfUkFOS0lOR1NfUEVSX0VMRUNUSU9OIiwiTUFYX0NPTlRFTlRfTEVOR1RIX0JZVEVTIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBUUFBLE9BQU8sQ0FBQyxpQkFBRCxDQUFQLENBQTJCQyxXQUEzQjs7QUFFQSxNQUFNQyxLQUFLLEdBQUc7QUFDVkMsRUFBQUEsUUFBUSxFQUFHLEdBQUVDLFNBQVUsT0FEYjtBQUVWQyxFQUFBQSxVQUFVLEVBQUcsR0FBRUQsU0FBVTtBQUZmLENBQWQ7O0FBS0FFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixNQUFjO0FBQzNCLFNBQU8sNkJBQW1CO0FBQ3RCQyxJQUFBQSxPQUFPLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxPQUFaLEtBQXdCO0FBRFgsR0FBbkIsRUFFSjtBQUVDQyxJQUFBQSxPQUFPLEVBQUUsT0FGVjtBQU9DQyxJQUFBQSxPQUFPLEVBQUUsQ0FBQ0MsTUFBRCxFQUF3QjtBQUFFQyxNQUFBQTtBQUFGLEtBQXhCLEtBQWdFO0FBSXJFRCxNQUFBQSxNQUFNLENBQUNFLE9BQVAsS0FBbUJGLE1BQU0sQ0FBQ0UsT0FBUCxDQUFlQyxLQUFmLEdBQXVCLEVBQ3RDLEdBQUdILE1BQU0sQ0FBQ0UsT0FBUCxDQUFlQyxLQURvQjtBQUV0Q2QsUUFBQUEsUUFBUSxFQUFFRCxLQUFLLENBQUNDLFFBRnNCO0FBR3RDRSxRQUFBQSxVQUFVLEVBQUVILEtBQUssQ0FBQ0c7QUFIb0IsT0FBMUM7QUFNQSxhQUFPUyxNQUFQO0FBQ0gsS0FsQkY7QUF1QkNKLElBQUFBLEdBQUcsRUFBRTtBQUNEUSxNQUFBQSxTQUFTLEVBQUVULE9BQU8sQ0FBQ0MsR0FBUixDQUFZUSxTQUR0QjtBQUVEQyxNQUFBQSxjQUFjLEVBQUVWLE9BQU8sQ0FBQ0MsR0FBUixDQUFZUyxjQUYzQjtBQUdEQyxNQUFBQSxtQkFBbUIsRUFBRVgsT0FBTyxDQUFDQyxHQUFSLENBQVlVLG1CQUhoQztBQUlEQyxNQUFBQSxnQkFBZ0IsRUFBRVosT0FBTyxDQUFDQyxHQUFSLENBQVlXLGdCQUo3QjtBQUtEQyxNQUFBQSxlQUFlLEVBQUViLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWSxlQUw1QjtBQU1EQyxNQUFBQSw0QkFBNEIsRUFBRWQsT0FBTyxDQUFDQyxHQUFSLENBQVlhLDRCQU56QztBQU9EQyxNQUFBQSx3QkFBd0IsRUFBRWYsT0FBTyxDQUFDQyxHQUFSLENBQVljLHdCQVByQztBQVFEQyxNQUFBQSx5QkFBeUIsRUFBRWhCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZSx5QkFSdEM7QUFTREMsTUFBQUEsd0JBQXdCLEVBQUVqQixPQUFPLENBQUNDLEdBQVIsQ0FBWWdCO0FBVHJDO0FBdkJOLEdBRkksQ0FBUDtBQXFDSCxDQXRDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB3aXRoQnVuZGxlQW5hbHl6ZXIgZnJvbSAnQG5leHQvYnVuZGxlLWFuYWx5emVyJ1xuaW1wb3J0IERvdGVudldlYnBhY2tQbHVnaW4gZnJvbSAnZG90ZW52LXdlYnBhY2snXG5cbmltcG9ydCB0eXBlIHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJ3dlYnBhY2snXG5cbi8vID8gTm90IHVzaW5nIEVTNi9UUyBpbXBvcnQgc3ludGF4IGhlcmUgYmVjYXVzZSBkZXYtdXRpbHMgaGFzIHNwZWNpYWxcbi8vID8gY2lyY3Vtc3RhbmNlc1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnJlc29sdmVkLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzXG5yZXF1aXJlKCcuL3NyYy9kZXYtdXRpbHMnKS5wb3B1bGF0ZUVudigpO1xuXG5jb25zdCBwYXRocyA9IHtcbiAgICB1bml2ZXJzZTogYCR7X19kaXJuYW1lfS9zcmMvYCxcbiAgICBtdWx0aXZlcnNlOiBgJHtfX2Rpcm5hbWV9L2xpYi9gLFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSAoKTogb2JqZWN0ID0+IHtcbiAgICByZXR1cm4gd2l0aEJ1bmRsZUFuYWx5emVyKHtcbiAgICAgICAgZW5hYmxlZDogcHJvY2Vzcy5lbnYuQU5BTFlaRSA9PT0gJ3RydWUnXG4gICAgfSkoe1xuICAgICAgICAvLyA/IFJlbmFtZXMgdGhlIGJ1aWxkIGRpciBcImJ1aWxkXCIgaW5zdGVhZCBvZiBcIi5uZXh0XCJcbiAgICAgICAgZGlzdERpcjogJ2J1aWxkJyxcblxuICAgICAgICAvLyA/IFdlYnBhY2sgY29uZmlndXJhdGlvblxuICAgICAgICAvLyAhIE5vdGUgdGhhdCB0aGUgd2VicGFjayBjb25maWd1cmF0aW9uIGlzIGV4ZWN1dGVkIHR3aWNlOiBvbmNlXG4gICAgICAgIC8vICEgc2VydmVyLXNpZGUgYW5kIG9uY2UgY2xpZW50LXNpZGUhXG4gICAgICAgIHdlYnBhY2s6IChjb25maWc6IENvbmZpZ3VyYXRpb24sIHsgaXNTZXJ2ZXIgfTogeyBpc1NlcnZlcjogYm9vbGVhbiB9KSA9PiB7XG4gICAgICAgICAgICAvLyA/IFRoZXNlIGFyZSBhbGlhc2VzIHRoYXQgY2FuIGJlIHVzZWQgZHVyaW5nIEpTIGltcG9ydCBjYWxsc1xuICAgICAgICAgICAgLy8gISBOb3RlIHRoYXQgeW91IG11c3QgYWxzbyBjaGFuZ2UgdGhlc2Ugc2FtZSBhbGlhc2VzIGluIHRzY29uZmlnLmpzb25cbiAgICAgICAgICAgIC8vICEgTm90ZSB0aGF0IHlvdSBtdXN0IGFsc28gY2hhbmdlIHRoZXNlIHNhbWUgYWxpYXNlcyBpbiBwYWNrYWdlLmpzb24gKGplc3QpXG4gICAgICAgICAgICBjb25maWcucmVzb2x2ZSAmJiAoY29uZmlnLnJlc29sdmUuYWxpYXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uY29uZmlnLnJlc29sdmUuYWxpYXMsXG4gICAgICAgICAgICAgICAgdW5pdmVyc2U6IHBhdGhzLnVuaXZlcnNlLFxuICAgICAgICAgICAgICAgIG11bHRpdmVyc2U6IHBhdGhzLm11bHRpdmVyc2UsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA/IFNlbGVjdCBzb21lIGVudmlyb25tZW50IHZhcmlhYmxlcyBkZWZpbmVkIGluIC5lbnYgdG8gcHVzaCB0byB0aGVcbiAgICAgICAgLy8gPyBjbGllbnQuXG4gICAgICAgIC8vICEhIERPIE5PVCBQVVQgQU5ZIFNFQ1JFVCBFTlZJUk9OTUVOVCBWQVJJQUJMRVMgSEVSRSAhIVxuICAgICAgICBlbnY6IHtcbiAgICAgICAgICAgIE1BWF9MSU1JVDogcHJvY2Vzcy5lbnYuTUFYX0xJTUlULFxuICAgICAgICAgICAgTElNSVRfT1ZFUlJJREU6IHByb2Nlc3MuZW52LkxJTUlUX09WRVJSSURFLFxuICAgICAgICAgICAgRElTQUJMRV9SQVRFX0xJTUlUUzogcHJvY2Vzcy5lbnYuRElTQUJMRV9SQVRFX0xJTUlUUyxcbiAgICAgICAgICAgIExPQ0tPVVRfQUxMX0tFWVM6IHByb2Nlc3MuZW52LkxPQ0tPVVRfQUxMX0tFWVMsXG4gICAgICAgICAgICBESVNBTExPV19XUklURVM6IHByb2Nlc3MuZW52LkRJU0FMTE9XX1dSSVRFUyxcbiAgICAgICAgICAgIFJFUVVFU1RTX1BFUl9DT05UUklWRURfRVJST1I6IHByb2Nlc3MuZW52LlJFUVVFU1RTX1BFUl9DT05UUklWRURfRVJST1IsXG4gICAgICAgICAgICBNQVhfT1BUSU9OU19QRVJfRUxFQ1RJT046IHByb2Nlc3MuZW52Lk1BWF9PUFRJT05TX1BFUl9FTEVDVElPTixcbiAgICAgICAgICAgIE1BWF9SQU5LSU5HU19QRVJfRUxFQ1RJT046IHByb2Nlc3MuZW52Lk1BWF9SQU5LSU5HU19QRVJfRUxFQ1RJT04sXG4gICAgICAgICAgICBNQVhfQ09OVEVOVF9MRU5HVEhfQllURVM6IHByb2Nlc3MuZW52Lk1BWF9DT05URU5UX0xFTkdUSF9CWVRFUyxcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbiJdfQ==